<!DOCTYPE html>
<html>

<head>

  <title>OONG GEE-MAPS</title>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />
  <script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>


  <style>
    html,
    body {
      height: 100%;
      margin: 0;
    }

    #map {
      width: 600px;
      height: 400px;
    }
  </style>

  <style>
    body {
      padding: 0;
      margin: 0;
    }

    #map {
      height: 100%;
      width: 100vw;
    }
  </style>
</head>

<body>

  <div id='map'></div>

  <script>
    var map = L.map('map').fitWorld();

    L.tileLayer('https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', {
      maxZoom: 20,
    })
      .addTo(map);

    var json_point = [
     { 
        name: 'โรงพยาบาลกรุงเทพพิษณุโลก',
        lat: 16.816684,
        lon: 100.273231
      }, { 
        name: 'โรงพยาบาลรวมแพทย์ พิษณุโลก',
        lat: 16.8098958,
        lon: 100.2595603
      }, { 
        name: 'โรงพยาบาลพิษณุโลก ฮอสพิทอล',
        lat: 16.7413465,
        lon: 100.0521113
      }, { 
        name: 'โรงพยาบาลพุทธชินราช พิษณุโลก',
        lat: 16.808308,
        lon: 100.263499
      }, { 
        name: 'โรงพยาบาลค่ายสมเด็จพระนเรศวรมหาราช',
        lat: 16.834088,
        lon: 100.254428
      }, { 
        name: 'โรงพยาบาลรังสีรักษา และเวชศาสตร์นิวเคลียร์',
        lat: 16.819937,
        lon: 100.26909
      }, { 
        name: 'ศูนย์สุขภาพชุมชนเมืองพิษณุโลก',
        lat: 16.81981,
        lon: 100.264256
      }, { 
        name: 'ศูนย์สุขภาพชุมชนพันปี',
        lat: 16.809352,
        lon: 100.25819
      }, { 
        name: 'โรงพยาบาลส่งเสริมสุขภาพตำบลท่าโพธิ์',
        lat: 16.7688,
        lon: 100.21669
      }, { 
        name: 'โรงพยาบาลวังทอง',
        lat: 16.838864,
        lon: 100.434744
      }, { 
        name: 'โรงพยาบาลพระพุทธชินราช2',
        lat: 16.796251,
        lon: 100.197231
      }, { 
        name: 'โรงพยาบาลบางระกำ',
        lat: 16.759429,
        lon: 100.118701
      }, { 
        name: 'โรงพยาบาลส่งเสริมสุขภาพตำบลตำบลวัดจันทร์',
        lat: 16.802352,
        lon: 100.21865
      }, { 
        name: 'โรงพยาบาลศรีสวรรค์ ',
        lat: 15.70624,
        lon: 100.130977
      }, { 
        name: 'โรงพยาบาลปากน้ำโพ 2',
        lat: 15.7081,
        lon: 100.138424
      }, { 
        name: 'โรงพยาบาลสวรรค์ประชารักษ์',
        lat: 15.706826,
        lon: 100.138493
      }, { 
        name: 'โรงพยาบาลปากน้ำโพ',
        lat: 15.696158,
        lon: 100.123045
      }, { 
        name: 'โรงพยาบาลร่มฉัตร',
        lat: 15.699547,
        lon: 100.133735
      }, { 
        name: 'โรงพยาบาลรวมแพทย์ฉะเชิงเทรา',
        lat: 13.662641,
        lon: 101.105068
      }, { 
        name: 'โรงพยาบาลค่ายจิรประวัติ',
        lat: 15.673974,
        lon: 100.127007
      }, { 
        name: 'โรงพยาบาลเมืองสี่แคว',
        lat: 15.70807,
        lon: 100.137582
      }, { 
        name: 'โรงพยาบาลสวรรค์ประชารักษ์ (เขาเขียว)',
        lat: 15.64733,
        lon: 100.132892
      }, { 
        name: 'โรงพยาบาลเรืองเวชนครสวรรค์',
        lat: 15.936979,
        lon: 99.990091
      }, { 
        name: 'คลินิกวัยใส รพ.สวรรค์ประชารักษ์',
        lat: 15.708144,
        lon: 100.137927
      }, { 
        name: 'โรงพยาบาลส่งเสริมสุขภาพตำบลบ้านวัดไทร',
        lat: 15.744102,
        lon: 100.09201
      }, { 
        name: 'ศูนย์อนามัยที่ 3 โรงพยาบาลส่งเสริมสุขภาพนครสวรรค์ (โรงพยาบาลแม่และเด็ก)',
        lat: 15.67821,
        lon: 100.125862
      }, { 
        name: 'รพ.สต.บ้านเกาะหงษ์',
        lat: 15.628925,
        lon: 100.090821
      }, { 
        name: 'โรงพยาบาลบ้านโป่ง',
        lat: 13.817254,
        lon: 99.870534
      }, { 
        name: 'โรงพยาบาลโกรกพระ',
        lat: 15.553559,
        lon: 100.066362
      }, { 
        name: 'ศูนย์การแพทย์มหิดลบำรุงรักษ์ จังหวัดนครสวรรค์',
        lat: 15.57733,
        lon: 100.153062
      }, { 
        name: 'สถานีอนามัยบ้านวัดไทรย์',
        lat: 15.744187,
        lon: 100.091974
      }, {  
        name: 'โรงพยาบาลพยุหะคีรี',
        lat: 15.478074,
        lon: 100.139122
      }, { 
        name: 'โรงพยาบาลบรรพตพิสัย',
        lat: 15.947008,
        lon: 99.980245
      }, { 
        name: 'โรงพยาบาลเก้าเลี้ยว',
        lat: 15.867972,
        lon: 100.108601
      }, { 
        name: 'โรงพยาบาลส่งเสริมสุขภาพตำบลบ้านท่าน้ำอ้อย',
        lat: 15.416604,
        lon: 100.134518
      }, { 
        name: 'โรงพยาบาลท่าตะโก',
        lat: 15.642525,
        lon: 100.486014
      }, { 
        name: 'โรงพยาบาลชุมแสง',
        lat: 15.868682,
        lon: 100.271942
      }, { 
        name: 'โรงพยาบาลลาดยาว',
        lat: 15.757535,
        lon: 99.815764
      }, { 
        name: 'โรงพยาบาลตาคลี',
        lat: 15.241234,
        lon: 100.351731
      }, {
        name: 'โรงพยาบาลหนองบัวลำภู',
        lat: 17.198787,
        lon: 102.457424
      }, {
        name: 'โรงพยาบาลมหาวิทยาลัยนเรศวร',
        lat: 16.7489044,
        lon: 100.1891314
        
      }, {
        name: 'โรงพยาบาลพิษณุเวช',
        lat: 16.8089236,
        lon: 100.2601161
      }

    ]


    function onLocationFound(e) {
      console.log(e);

      L.marker(e.latlng).addTo(map)

      var center = [e.latlng.lng, e.latlng.lat];
      var radius = 5;
      var options = { steps: 90, units: 'kilometers', properties: { foo: 'bar' } };
      var circle = turf.circle(center, radius, options);
      var circle_ = L.geoJson(circle).addTo(map)

      var hospital_icon = L.icon({
        iconUrl: 'https://image.flaticon.com/icons/png/512/196/196144.png',
        iconSize: [35, 35],
      });
      json_point.forEach(f => {

        var from = turf.point([f.lon, f.lat]);
        var to = turf.point([e.latlng.lng, e.latlng.lat]);
        var distance = turf.distance(from, to);

        L.marker([f.lat, f.lon], { icon: hospital_icon })
          .bindPopup(' ชื่อโรงพยาบาล : ' + f.name + ' <br> ระยะทาง : ' + distance.toFixed(2) + ' กิโลเมตร <br><a target="_blank" href="https://www.google.co.th/maps/dir/' + e.latlng.lat + ',' + e.latlng.lng + '/' + f.lat + ',' + f.lon + '/"> นำทาง </a>')
          .addTo(map)
      });
    }

    function onLocationError(e) {
      alert(e.message);
    }

    map.on('locationfound', onLocationFound);
    map.on('locationerror', onLocationError);

    map.locate({ setView: true, maxZoom: 10 });
  </script>



</body>

</html>
